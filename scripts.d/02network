#!/bin/sh
#===========================
#FOR:BUILD
#===========================

require_package udhcpc

#===========================
#FOR:RUN
#===========================

log_start "Starting networking..."

# Bringing up network devices
DEVICES=$(ifconfig -a | grep '^[a-z]' | awk '{ print $1 }')
for DEV in $DEVICES; do
   if [ "$DEV" != "lo" ]; then
     # MTU 1460 for Google Compute Engine
     ifconfig $DEV mtu 1460 up
   fi
done

# Obtain IP address
udhcpc -qnf -t 20 -O staticroutes -O mtu >/var/log/udhcpc.log 2>&1

log_ok
